!function(t){"use strict";var r,y="undefined"==typeof window&&"undefined"!=typeof global&&"function"==typeof require,d=y?t.require:null,g={protocol:"protocol",host:"hostname",port:"port",path:"pathname",query:"search",hash:"hash"},m={ftp:21,gopher:70,http:80,https:443,ws:80,wss:443},v=document;function q(){return y?(r||(r="file://"+(process.platform.match(/^win/i)?"/":"")+d("fs").realpathSync(".")),r):v.location.href}function n(t){return encodeURIComponent(t).replace(/'/g,"%27")}function w(t){return(t=(t=(t=t.replace(/\+/g," ")).replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e,o){var s=parseInt(r,16)-224,n=parseInt(e,16)-128;if(0===s&&n<32)return t;var i=(s<<12)+(n<<6)+(parseInt(o,16)-128);return 65535<i?t:String.fromCharCode(i)})).replace(/%([cd][0-9a-f])%([89ab][0-9a-f])/gi,function(t,r,e){var o=parseInt(r,16)-192;if(o<2)return t;var s=parseInt(e,16)-128;return String.fromCharCode((o<<6)+s)})).replace(/%([0-7][0-9a-f])/gi,function(t,r){return String.fromCharCode(parseInt(r,16))})}function A(t){for(var r,e=/([^=&]+)(=([^&]*))?/g;r=e.exec(t);){var o=decodeURIComponent(r[1].replace(/\+/g," ")),s=r[3]?w(r[3]):"";void 0!==this[o]&&null!==this[o]?(this[o]instanceof Array||(this[o]=[this[o]]),this[o].push(s)):this[o]=s}}function C(t,r){!function(t,r,e){var o,s,n;r||(r=q()),y?o=d("url").parse(r):(o=v.createElement("a")).href=r;var i,h,p=(h={path:!0,query:!0,hash:!0},(i=r)&&/^[a-z]+:/.test(i)&&(h.protocol=!0,h.host=!0,/[-a-z0-9]+(\.[-a-z0-9])*:\d+/i.test(i)&&(h.port=!0),/\/\/(.*?)(?::(.*?))?@/.test(i)&&(h.user=!0,h.pass=!0)),h);for(s in n=r.match(/\/\/(.*?)(?::(.*?))?@/)||[],g)p[s]?t[s]=o[g[s]]||"":t[s]="";if(t.protocol=t.protocol.replace(/:$/,""),t.query=t.query.replace(/^\?/,""),t.hash=w(t.hash.replace(/^#/,"")),t.user=w(n[1]||""),t.pass=w(n[2]||""),t.port=m[t.protocol]==t.port||0==t.port?"":t.port,!p.protocol&&/[^/#?]/.test(r.charAt(0))&&(t.path=r.split("?")[0].split("#")[0]),!p.protocol&&e){var a=new C(q().match(/(.*\/)/)[0]),u=a.path.split("/"),c=t.path.split("/"),f=["protocol","user","pass","host","port"],l=f.length;for(u.pop(),s=0;s<l;s++)t[f[s]]=a[f[s]];for(;".."===c[0];)u.pop(),c.shift();t.path=("/"!==r.charAt(0)?u.join("/"):"")+"/"+c.join("/")}t.path=t.path.replace(/^\/{2,}/,"/"),t.paths(t.paths()),t.query=new A(t.query)}(this,t,!r)}A.prototype.toString=function(){var t,r,e="",o=n;for(t in this)if(!(this[t]instanceof Function||null===this[t]))if(this[t]instanceof Array){var s=this[t].length;if(s)for(r=0;r<s;r++)e+=e?"&":"",e+=o(t)+"="+o(this[t][r]);else e+=(e?"&":"")+o(t)+"="}else e+=e?"&":"",e+=o(t)+"="+o(this[t]);return e},C.prototype.clearQuery=function(){for(var t in this.query)this.query[t]instanceof Function||delete this.query[t];return this},C.prototype.queryLength=function(){var t,r=0;for(t in this)this[t]instanceof Function||r++;return r},C.prototype.isEmptyQuery=function(){return 0===this.queryLength()},C.prototype.paths=function(t){var r,e="",o=0;if(t&&t.length&&t+""!==t){for(this.isAbsolute()&&(e="/"),r=t.length;o<r;o++)t[o]=!o&&t[o].match(/^\w:$/)?t[o]:n(t[o]);this.path=e+t.join("/")}for(o=0,r=(t=("/"===this.path.charAt(0)?this.path.slice(1):this.path).split("/")).length;o<r;o++)t[o]=w(t[o]);return t},C.prototype.encode=n,C.prototype.decode=w,C.prototype.isAbsolute=function(){return this.protocol||"/"===this.path.charAt(0)},C.prototype.toString=function(){return(this.protocol&&this.protocol+"://")+(this.user&&n(this.user)+(this.pass&&":"+n(this.pass))+"@")+(this.host&&this.host)+(this.port&&":"+this.port)+(this.path&&this.path)+(this.query.toString()&&"?"+this.query)+(this.hash&&"#"+n(this.hash))},t[t.exports?"exports":"Url"]=C}("undefined"!=typeof module&&module.exports?module:window);